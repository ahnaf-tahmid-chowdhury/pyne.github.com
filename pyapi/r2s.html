


<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mesh-based Rigourous 2-Step Activation – pyne.r2s &#8212; PyNE 0.7.1</title>
    <link rel="stylesheet" href="../_static/pyne.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noticia+Text|Open+Sans|Droid+Sans+Mono" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/jquery.cookie.js"></script>
    <script src="../_static/cloud.base.js"></script>
    <script src="../_static/cloud.js"></script>
    <link rel="shortcut icon" href="../_static/pyne_icon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1"><script type="text/javascript">
var ga_enabled = !$.cookie('disable-ga');
if(ga_enabled){
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37452818-1']);
  _gaq.push(['_setCookiePath', '/']);
  _gaq.push(['_setDetectFlash', false]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
}
</script>
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">PyNE</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Mesh-based Rigourous 2-Step Activation – <code class="xref py py-mod docutils literal notranslate"><span class="pre">pyne.r2s</span></code></a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="mesh-based-rigourous-2-step-activation-pyne-r2s">
<span id="pyne-r2s"></span><h1>Mesh-based Rigourous 2-Step Activation – <a class="reference internal" href="../usersguide/r2s.html#module-pyne.r2s" title="pyne.r2s"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyne.r2s</span></code></a><a class="headerlink" href="#mesh-based-rigourous-2-step-activation-pyne-r2s" title="Permalink to this headline">¶</a></h1>
<p>This module contains functions for mesh-based Rigorous 2-Step activation [1]
using MCNP for neutron and photon transport and ALARA for nuclear inventory
analysis. The functionality of the module can be obtained by importing as
such:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyne</span> <span class="kn">import</span> <span class="n">r2s</span>
</pre></div>
</div>
<p>[1] CHEN and U. FISCHER, “Rigorous MCNP Based Shutdown Dose Rate Calculations:
Computational Scheme, Verification Calculations and Application to ITER,”
Fusion Engineering and Design, 63-64, 107–114 (2002).</p>
<div class="section" id="module-pyne.r2s">
<span id="rigorous-2-step-activation-api"></span><h2>Rigorous 2-Step Activation API<a class="headerlink" href="#module-pyne.r2s" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="pyne.r2s.irradiation_setup">
<code class="sig-prename descclassname">pyne.r2s.</code><code class="sig-name descname">irradiation_setup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">flux_mesh</span></em>, <em class="sig-param"><span class="n">cell_mats</span></em>, <em class="sig-param"><span class="n">cell_fracs</span></em>, <em class="sig-param"><span class="n">alara_params</span></em>, <em class="sig-param"><span class="n">tally_num</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">num_rays</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">grid</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">flux_tag</span><span class="o">=</span><span class="default_value">'n_flux'</span></em>, <em class="sig-param"><span class="n">fluxin</span><span class="o">=</span><span class="default_value">'alara_fluxin'</span></em>, <em class="sig-param"><span class="n">reverse</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">alara_inp</span><span class="o">=</span><span class="default_value">'alara_inp'</span></em>, <em class="sig-param"><span class="n">alara_matlib</span><span class="o">=</span><span class="default_value">'alara_matlib'</span></em>, <em class="sig-param"><span class="n">output_mesh</span><span class="o">=</span><span class="default_value">'r2s_step1.h5m'</span></em>, <em class="sig-param"><span class="n">output_material</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">decay_times</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sub_voxel</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">responses</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wdr_file</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyne/r2s.html#irradiation_setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyne.r2s.irradiation_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is used to setup the irradiation inputs after the first
R2S transport step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>flux_mesh</strong><span class="classifier">PyNE Meshtal object, Mesh object, or str</span></dt><dd><p>The source of the neutron flux information. This can be a PyNE Meshtal
object, a pyne Mesh object, or the filename an MCNP meshtal file, or
the filename of an unstructured mesh tagged with fluxes.</p>
</dd>
<dt><strong>cell_mats</strong><span class="classifier">dict</span></dt><dd><p>Maps geometry cell numbers to PyNE Material objects.</p>
</dd>
<dt><strong>cell_fracs</strong><span class="classifier">record array</span></dt><dd><p>The output of dagmc.discretize_geom().</p>
</dd>
<dt><strong>alara_params</strong><span class="classifier">str</span></dt><dd><p>The ALARA input blocks specifying everything except the geometry
and materials. This can either be passed as string or as a file name.</p>
</dd>
<dt><strong>tally_num</strong><span class="classifier">int</span></dt><dd><p>The MCNP FMESH4 tally number of the neutron flux tally within the
meshtal file.</p>
</dd>
<dt><strong>num_rays</strong><span class="classifier">int, optional</span></dt><dd><p>The number of rays to fire down a mesh row for geometry discretization.
This number must be a perfect square if grid=True.</p>
</dd>
<dt><strong>grid</strong><span class="classifier">bool, optional</span></dt><dd><p>The if False, geometry discretization will be done with randomly fired
rays. If true, a grid of sqrt(num_rays) x sqrt(num_rays) rays is used
for each mesh row.</p>
</dd>
<dt><strong>flux_tag</strong><span class="classifier">str, optional</span></dt><dd><p>The mesh tag for the neutron flux.</p>
</dd>
<dt><strong>fluxin</strong><span class="classifier">str, optional</span></dt><dd><p>The name of the ALARA fluxin file to be created.</p>
</dd>
<dt><strong>reverse</strong><span class="classifier">bool, optional</span></dt><dd><p>If True the fluxes in the fluxin file will be printed in the reverse
order of how they appear within the flux vector tag. Since MCNP and
the Meshtal class order fluxes from low energy to high energy, this
option should only be true if the transmutation data being used is
ordered from high energy to low energy.</p>
</dd>
<dt><strong>alara_inp</strong><span class="classifier">str, optional</span></dt><dd><p>The name of the ALARA input file to be created.</p>
</dd>
<dt><strong>alara_matlib</strong><span class="classifier">str, optional</span></dt><dd><p>The name of the alara_matlib file to be created.</p>
</dd>
<dt><strong>output_mesh</strong><span class="classifier">str, optional</span></dt><dd><p>A mesh containing all the fluxes and materials used for irradiation
setup.</p>
</dd>
<dt><strong>output_material</strong><span class="classifier">bool, optional</span></dt><dd><p>If true, output mesh will have materials as determined by
dagmc.discretize_geom()</p>
</dd>
<dt><strong>decay_times: list</strong></dt><dd><p>List of the decay times. If no decay times given, use ‘1 s’.</p>
</dd>
<dt><strong>sub_voxel</strong><span class="classifier">bool, optional</span></dt><dd><p>If true, sub-voxel r2s work flow  will be used.</p>
</dd>
<dt><strong>responses</strong><span class="classifier">list of str, optional</span></dt><dd><p>The list of requested responses.</p>
</dd>
<dt><strong>wdr_file</strong><span class="classifier">str</span></dt><dd><p>Path to the wdr file.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pyne.r2s.photon_sampling_setup">
<code class="sig-prename descclassname">pyne.r2s.</code><code class="sig-name descname">photon_sampling_setup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mesh</span></em>, <em class="sig-param"><span class="n">phtn_src</span></em>, <em class="sig-param"><span class="n">tags</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyne/r2s.html#photon_sampling_setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyne.r2s.photon_sampling_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>This function reads in an ALARA photon source file and creates and tags
photon source densities onto a Mesh object for the second R2S transport
step.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>mesh</strong><span class="classifier">PyNE Mesh</span></dt><dd><p>The object containing the mesh instance to be tagged.</p>
</dd>
<dt><strong>phtn_src</strong><span class="classifier">str</span></dt><dd><p>The path of the ALARA phtn_file.</p>
</dd>
<dt><strong>tags: dict</strong></dt><dd><p>A dictionary were the keys are tuples with two values. The first is a
string denoting an nuclide in any form that is understood by
pyne.nucname (e.g. ‘1001’, ‘U-235’, ‘242Am’) or ‘TOTAL’ for all
nuclides. The second is a string denoting the decay time as it appears
in the phtn_src file (e.g. ‘shutdown’, ‘1 h’ ‘3 d’). The values of the
dictionary are the requested tag names for the combination of nuclide
and decay time. These tag names should be the tag names that are read
by the sampling subroutine. For example:</p>
<p>tags = {(‘U-235’, ‘shutdown’): ‘tag1’, (‘TOTAL’, ‘1 h’): ‘tag2’}</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pyne.r2s.resolve_mesh">
<code class="sig-prename descclassname">pyne.r2s.</code><code class="sig-name descname">resolve_mesh</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mesh_reference</span></em>, <em class="sig-param"><span class="n">tally_num</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">flux_tag</span><span class="o">=</span><span class="default_value">'n_flux'</span></em>, <em class="sig-param"><span class="n">output_material</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyne/r2s.html#resolve_mesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyne.r2s.resolve_mesh" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>This function creates a method that will consume many mesh-like objects</dt><dd><p>(e.g. mesh, an h5m file, a meshtal file, etc) and returns a robust PyNE
mesh object accordingly.</p>
</dd>
</dl>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>mesh_reference</strong><span class="classifier">Mesh object, unstructured mesh file, Meshtal, meshtal</span></dt><dd><blockquote>
<div><p>file, or PyNE Meshtal object.</p>
</div></blockquote>
<p>The source of the neutron flux information. This can be a PyNE Meshtal
object, a pyne Mesh object, or the filename an MCNP meshtal file, or
the filename of an unstructured mesh tagged with fluxes.</p>
</dd>
<dt><strong>tally_num</strong><span class="classifier">int</span></dt><dd><p>The MCNP FMESH4 tally number of the neutron flux tally within the
meshtal file.</p>
</dd>
<dt><strong>flux_tag</strong><span class="classifier">str, optional</span></dt><dd><p>The tag name for the neutron flux.</p>
</dd>
<dt><strong>output_material</strong><span class="classifier">bool, optional</span></dt><dd><p>If true, output mesh will have materials as determined by
dagmc.discretize_geom().</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>m</strong><span class="classifier">PyNE mesh object</span></dt><dd><p>The PyNE mesh object of the flux data.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pyne.r2s.total_photon_source_intensity">
<code class="sig-prename descclassname">pyne.r2s.</code><code class="sig-name descname">total_photon_source_intensity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">m</span></em>, <em class="sig-param"><span class="n">tag_name</span></em>, <em class="sig-param"><span class="n">sub_voxel</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyne/r2s.html#total_photon_source_intensity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyne.r2s.total_photon_source_intensity" title="Permalink to this definition">¶</a></dt>
<dd><p>This function reads mesh tagged with photon source densities and returns
the total photon emission desinty.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>m</strong><span class="classifier">PyNE Mesh</span></dt><dd><p>The mesh-based photon emission density distribution in p/cm3/s.</p>
</dd>
<dt><strong>tag_name</strong><span class="classifier">str</span></dt><dd><p>The name of the tag on the mesh with the photon emission density
information.</p>
</dd>
<dt><strong>sub_voxel: bool, optional</strong></dt><dd><p>If true, sub-voxel r2s work flow will be used.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>intensity</strong><span class="classifier">float</span></dt><dd><p>The total photon emission density across the entire mesh (p/s).</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="../index.html" title="index">
          <img class="logo" src="../_static/pyne_icon_small.png" alt="Logo"/>
        </a></p><div class="sphinx-toc sphinxlocaltoc">
    <h3><a href="../index.html">Page contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Mesh-based Rigourous 2-Step Activation – <code class="xref py py-mod docutils literal notranslate"><span class="pre">pyne.r2s</span></code></a><ul>
<li><a class="reference internal" href="#module-pyne.r2s">Rigorous 2-Step Activation API</a></li>
</ul>
</li>
</ul>

  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">PyNE</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Mesh-based Rigourous 2-Step Activation – <code class="xref py py-mod docutils literal notranslate"><span class="pre">pyne.r2s</span></code></a></li> 
      </ul>
    </div>
    </div>

    <div class="footer">
    <div style="background-color:rgba(255,255,255,0.5);display:inline-block;border-radius:10px;padding:6px;">
        
    <div class="footer" role="contentinfo">
        &#169; Copyright 2011-2019, The PyNE Development Team.
      Last updated on Oct 13, 2020.
    </div><script type="text/javascript">
    if(ga_enabled){
        document.write("<div class=\"footer\">This page uses <a href=\"http://analytics.google.com\">Google Analytics</a> to collect statistics. ");
        document.write("Click <button title=\"set cookie to disable analytics for this site\" class=\"link\" onclick=\"$.cookie('disable-ga', 'true', {expires: 3650, path: '/'}); window.location.reload(); return false; \">here</button> to disable analytics for this site.");
        document.write("</div>");
    }else{
        document.write("<div class=\"footer\">Google Analytics has been disabled. ");
        document.write("Click <button title=\"set cookie to re-enable analytics for this site\" class=\"link\" onclick=\"$.cookie('disable-ga', null, {path: '/'}); window.location.reload(); return false; \">here</button> to re-enable analytics for this site.");
    };
</script>
    <!-- cloud_sptheme 1.4 -->
    </div>
    </div>
  </body>
</html>